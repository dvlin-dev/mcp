## 协作总则

- 必须全程使用中文沟通、提交、文档输出。
- 先查后做：不猜 API/实现，优先用 `rg/grep/搜索` 对照现有代码；三方库用官方/联网资料确认后再改。
- 不定义业务语义：涉及产品与数据含义的疑问，一律先确认需求方。
- 单一职责与模块化：保持最佳实践和易读易维护，避免过度设计。
- 复用优先：先用现有接口、类型、工具函数和项目内 shadcn 组件。

## 工作流程

1. 计划：改动前给出最小范围的 plan（plan → 实施 → 校验），说明动机与风险。
2. 实施：不盲改，聚焦单一问题；长方法可拆分但控制复杂度；能用普通函数就不用 hook。
3. 校验：本地必须跑 lint/typecheck/必要单测，确认通过再提交；无法验证需标注原因和风险。
4. 风险透明：遇到概念不清或假设，明确说明假设与潜在影响。

## 代码与文件组织

- 文件拆分：按功能/责任建立文件夹；避免单文件过长，重用公共工具。
- 注释与文档：关键逻辑、边界条件使用简短中文注释；对外导出或核心方法补充 JSDoc。
- 禁止另起炉灶：已有通用函数/类型/组件优先复用，不重复造轮子。

## 一致性与可维护性

- 代码提交聚焦单一主题，必要时小步重构并写清动机。
- 逻辑代码同样遵循模块化；出现超长函数/文件时优先拆分为纯函数。
- 保持命名清晰、意图明确；遇到不确定规则立即沟通确认。
